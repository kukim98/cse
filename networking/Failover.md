# Failover
## Introduction
Failover allows **switching out the failed machine with a backup machine**. This allows the service to maintain high availability.

## VIP & VRRP
Servers can establish connections with each other to check up on each other's status; these are called **heartbeat connections**. These machines choose a **master node**, and the rest becomes **backup nodes**. Then, a **VIP (Virtual IP) address** is chosen; there aren't any machines with this VIP address, but the clients will use this VIP address to contact the servers. **When an ARP request is sent out by a client looking for the MAC address of a machine with the VIP address, only the master node will respond back with its MAC address; the backup nodes will simply drop the requests since they are not the master.** All requests will now be then forwarded to the master node using VIP address and the MAC address of the master node. If the master node becomes unavailable, the backup nodes will be alerted by the lack of heartbeat response back from the master node. **In this case, a new master node is chosen and takes over.** **Clients with the old ARP table will at first have difficulty connecting to the server because they have the MAC address of the dead master node. Eventually, their ARP tables will be updated to map the VIP to the new master node's MAC address, and they can continue talking to the server.** Although there are small seconds of server unresponsiveness, failover provides **high availability** by making sure that backups take over in the case masters become unavailable. This protocol is known as **VRRP (Virtual Router Redundancy Protocol)**.
